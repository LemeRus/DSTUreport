% This package designed and commented in Russian (utf-8 encoding).
%
% Стиль текстового документа по ГОСТ 2.105
% на основе базового стиля документов Лаборатории навигационных систем
% Автор - Илья Корогодин
% Адаптировал под стандарты ДГТУ и дополнил Руслан Лемеров
%
% Используется совместно с классом DSTUReport и расширением DSTUExtra

\ProvidesPackage{DSTUEskd}[2021/12/15 v1.00 GOST 2.105 modifications for DSTUReport]

%%%%%%%%%%%%%%%%%%
%Latex 2012 and up

% Здесь были объявлены переменные, которые теперь перенесены в DSTUTitles


\DSTUHaveLYtrue           % Использовать ли ЛУ
\DSTUHaveESKDFrametrue    % Использовать ли рамку по ЕСКД

\setlength\parindent{12.5mm}

\addto\captionsrussian{%
 \def\contentsname{%
  Содержание}% по ГОСТ 2.105 элемент называется Содержание
% \def\bibname{%  % Кто-то ниже (addbibresource?) перетерает bibname
%  Список~
%  использованных~
%  источниковBlaBLa}%
}
\newcommand\gostacronymsname{Список сокращений и условных обозначений}
\newcommand\gostbibname{Список литературы}

\usepackage[backend=biber, style=gost-numeric, sorting=none]{biblatex}
\usepackage{csquotes}

% назначения своих стилей колонтитулов
\makeatletter
\def\ps@titleFrame{
  \def\@oddhead{\titleFrame}       % Верхний колонтитул на нечётных страницах
  \def\@evenhead{\titleFrame}      % Верхний колонтитул на чётных страницах
  \def\@oddfoot{}                  % Очистка нижнего колонтитула
  \def\@evenfoot{}                 % Очистка нижнего колонтитула
  \textheight=220mm
}
\def\ps@mainFrame{
  \def\@oddhead{\mainFrame}       % Верхний колонтитул на нечётных страницах
  \def\@evenhead{\mainFrame}      % Верхний колонтитул на чётных страницах
  \def\@oddfoot{}                  % Очистка нижнего колонтитула
  \def\@evenfoot{}                 % Очистка нижнего колонтитула
}
\makeatother

% РАМКИ

\textwidth=165mm
\textheight=255mm
\oddsidemargin=-.4mm
\leftskip=7mm
\headsep=10mm

\topmargin=-1in
\unitlength=1mm

% Рамка - заглавная страница % по факту рамка для содержания
\def\titleFrame{\footnotesize\noindent\hbox to 0pt{%
\vbox to 0pt
{%
\noindent\begin{picture}(185,287)(5,0)
\linethickness{0.35mm}

\put(0,0)   {\line(0,1){287}}
\put(185,0) {\line(0,1){287}}
\put(0,0)   {\line(1,0){185}}
\put(0,287) {\line(1,0){185}}

\put(-12,  0){\line(0,1){145}}
\put( -7,  0){\line(0,1){145}}
\put(-12,  0){\line(1,0){12 }}
\put(-12, 25){\line(1,0){12 }}
\put(-12, 60){\line(1,0){12 }}
\put(-12, 85){\line(1,0){12 }}
\put(-12,110){\line(1,0){12 }}
\put(-12,145){\line(1,0){12 }}

\put(-11,  1){\rotatebox{ 90 }{Инв. № подл.}}
\put(-11, 26){\rotatebox{ 90 }{Подп. и дата}}
\put(-11, 61){\rotatebox{ 90 }{Взам. инв. №}}
\put(-11, 86){\rotatebox{ 90 }{Инв. № дубл.}}
\put(-11,111){\rotatebox{ 90 }{Подп. и дата}}

\put(0, 40){\line(1,0){185}}
\put(0, 25){\line(1,0){185}}
\put(0, 30){\line(1,0){65}}
{\linethickness{0.15mm} \put(0, 35){\line(1,0){65}}}
%\multiput(0, 5)(0, 5){2}{\line(1,0){65}}
\put(0, 25){\makebox(7,5){Изм}}
\put(7, 25){\line(0,1){15}\makebox(10,5){Лист}}
\put(17,25){\line(0,1){15}\makebox(23,5){№~докум.}}
\put(40,25){\line(0,1){15}\makebox(15,5){Подп.}}
\put(55,25){\line(0,1){15}\makebox(10,5){Дата}}
\put(65,25){\line(0,1){15}\makebox(120,15){\large\rightmark \decim\ \docType}}
\put(67,12.5) {\begin{minipage}[c][25mm][c]{66mm} \noindent%
                               \begin{center} {\normalsize \linespread{1.0} \devNameFull} \\%
                                              {\normalsize \docTypeFull}%
                               \end{center} \end{minipage}}

\put(0, 0){\makebox(17,5)[l]{\ Утв.}}       \put(17,  0){\makebox(23,5)[l]{\ \baseTutorIOF}}
\put(0, 5){\makebox(17,5)[l]{\ Н.контр.}}   \put(17,  5){\makebox(17,5)[l]{\ \nControl}}
\put(0, 15){\makebox(17,5)[l]{\ Пров.}}     \put(17, 15){\makebox(17,5)[l]{\ \schTutorIOF}}
\put(0, 20){\makebox(17,5)[l]{\ Разраб.}}   \put(17, 20){\makebox(17,5)[l]{\ \developerSurName}}

\put(0, 40){\line(1,0){185}}
\put(0, 25){\line(1,0){185}}
\put(0, 30){\line(1,0){65}}
{\linethickness{0.15mm} \put(0, 20){\line(1,0){65}}}
{\linethickness{0.15mm} \put(0, 15){\line(1,0){65}}}
{\linethickness{0.15mm} \put(0, 10){\line(1,0){65}}}
{\linethickness{0.15mm} \put(0,  5){\line(1,0){65}}}
%\multiput(0, 5)(0, 5){2}{\line(1,0){65}}
\put(17,0){\line(0,1){25}}
\put(40,0){\line(0,1){25}}
\put(55,0){\line(0,1){25}}
\put(65,0){\line(0,1){25}}

% Правая нижняя часть
\put(135,0) {\line(0,1){25}}
\put(140,15){\line(0,1){5}}
\put(145,15){\line(0,1){5}}
\put(150,15){\line(0,1){10}}
\put(165,15){\line(0,1){10}}
\put(135,15){\line(1,0){50}}
\put(135,20){\line(1,0){50}}
\put(135,20){\makebox(15,5){Лит.}}
\put(150,20){\makebox(15,5){Лист}}
\put(165,20){\makebox(20,5){Листов}}
\put(135,15){\makebox(5,5) {}}
\put(150,15){\makebox(15,5){\thepage}}
\put(165,15){\makebox(20,5){\pageref{LastPage}}}
\put(135,0) {\makebox(50,15){\orgName}}

% % Для военпреда % необязательный блок над основной надписью
% \put(65, 48){\line(1,0){120}}
% \put(65, 62){\line(1,0){120}}
% \put(65, 40){\line(0,1){ 22}}
% \put(79, 48){\line(0,1){ 14}}
% \put(132, 48){\line(0,1){ 14}}

\end{picture}
}
}}

% Рамка - последующие страницы
\def\mainFrame{\footnotesize\noindent\hbox to 0pt{%
\vbox to 0pt
{%
\noindent\begin{picture}(185,287)(5,0)
\linethickness{0.35mm}

\put(0,0)   {\line(0,1){287}}
\put(185,0) {\line(0,1){287}}
\put(0,0)   {\line(1,0){185}}
\put(0,287) {\line(1,0){185}}

\put(-12,  0){\line(0,1){145}}
\put( -7,  0){\line(0,1){145}}
\put(-12,  0){\line(1,0){12 }}
\put(-12, 25){\line(1,0){12 }}
\put(-12, 60){\line(1,0){12 }}
\put(-12, 85){\line(1,0){12 }}
\put(-12,110){\line(1,0){12 }}
\put(-12,145){\line(1,0){12 }}

\put(-11,  1){\rotatebox{ 90 }{Инв. № подл.}}
\put(-11, 26){\rotatebox{ 90 }{Подп. и дата}}
\put(-11, 61){\rotatebox{ 90 }{Взам. инв. №}}
\put(-11, 86){\rotatebox{ 90 }{Инв. № дубл.}}
\put(-11,111){\rotatebox{ 90 }{Подп. и дата}}

\put(0,0){\makebox(7,5){Изм}}
\put(0, 15){\line(1,0){185}}
\put(0, 5){\line(1,0){65}}
{\linethickness{0.15mm} \put(0, 10){\line(1,0){65}}}
%\multiput(0, 5)(0, 5){2}{\line(1,0){65}}
\put(7, 0){\line(0,1){15}\makebox(10,5){Лист}}
\put(17, 0){\line(0,1){15}\makebox(23,5){№~докум.}}
\put(40, 0){\line(0,1){15}\makebox(15,5){Подп.}}
\put(55, 0){\line(0,1){15}\makebox(10,5){Дата}}
\put(65, 0){\line(0,1){15}\makebox(110,15){\large\rightmark \decim\ \docType}}
\put(175,10){\makebox(10,5){Лист}}
\put(175, 0){\line(0,1){15}\makebox(10,10){\normalsize\thepage}}
\put(175,10){\line(1,0){10}}
\end{picture}
}
}}

% Рамка для спецификации
\def\specFrame{\footnotesize\noindent\hbox to 0pt{%
\vbox to 0pt
{%
\noindent\begin{picture}(185,287)(5,0)
\linethickness{0.35mm}

\put(0,0)   {\line(0,1){287}}
\put(185,0) {\line(0,1){287}}
\put(0,0)   {\line(1,0){185}}
\put(0,287) {\line(1,0){185}}

\put(-12,  0){\line(0,1){145}}
\put( -7,  0){\line(0,1){145}}
\put(-12,  0){\line(1,0){12 }}
\put(-12, 25){\line(1,0){12 }}
\put(-12, 60){\line(1,0){12 }}
\put(-12, 85){\line(1,0){12 }}
\put(-12,110){\line(1,0){12 }}
\put(-12,145){\line(1,0){12 }}

\put(-11,  1){\rotatebox{ 90 }{Инв. № подл.}}
\put(-11, 26){\rotatebox{ 90 }{Подп. и дата}}
\put(-11, 61){\rotatebox{ 90 }{Взам. инв. №}}
\put(-11, 86){\rotatebox{ 90 }{Инв. № дубл.}}
\put(-11,111){\rotatebox{ 90 }{Подп. и дата}}

% Разметка спецификации
\put(6,40) {\line(0,1){247}}
\put(12,40){\line(0,1){247}}
\put(20,40){\line(0,1){247}}
\put(90,40){\line(0,1){247}}
\put(153,40){\line(0,1){247}}
\put(163,40){\line(0,1){247}}

\put(0,  272){\rotatebox{ 90 }{\makebox(15,6){Формат}}}
\put(6,  272){\rotatebox{ 90 }{\makebox(15,6){Зона}}}
\put(12, 272){\rotatebox{ 90 }{\makebox(15,8){Поз.}}}
\put(20, 272){                 \makebox(70,15){Обозначение}}
\put(90, 272){                 \makebox(63,15){Наименование}}
\put(153,272){\rotatebox{ 90 }{\makebox(15,10){Кол.}}}
\put(163,272){                 \makebox(22,15){Приме\-чание}}

\put(0,272){\line(1,0){185}}
\put(0,264){\line(1,0){185}}
\put(0,256){\line(1,0){185}}
\put(0,248){\line(1,0){185}}
\put(0,240){\line(1,0){185}}
\put(0,232){\line(1,0){185}}
\put(0,224){\line(1,0){185}}
\put(0,216){\line(1,0){185}}
\put(0,208){\line(1,0){185}}
\put(0,200){\line(1,0){185}}
\put(0,192){\line(1,0){185}}
\put(0,184){\line(1,0){185}}
\put(0,176){\line(1,0){185}}
\put(0,168){\line(1,0){185}}
\put(0,160){\line(1,0){185}}
\put(0,152){\line(1,0){185}}
\put(0,144){\line(1,0){185}}
\put(0,136){\line(1,0){185}}
\put(0,128){\line(1,0){185}}
\put(0,120){\line(1,0){185}}
\put(0,112){\line(1,0){185}}
\put(0,104){\line(1,0){185}}
\put(0,96){\line(1,0){185}}
\put(0,88){\line(1,0){185}}
\put(0,80){\line(1,0){185}}
\put(0,72){\line(1,0){185}}
\put(0,64){\line(1,0){185}}
\put(0,56){\line(1,0){185}}
\put(0,48){\line(1,0){185}}

\put(0,0){\makebox(7,5){Изм}}
\put(0, 15){\line(1,0){185}}
\put(0, 5){\line(1,0){65}}
{\linethickness{0.15mm} \put(0, 10){\line(1,0){65}}}
%\multiput(0, 5)(0, 5){2}{\line(1,0){65}}
\put(7, 0){\line(0,1){15}\makebox(10,5){Лист}}
\put(17, 0){\line(0,1){15}\makebox(23,5){№~докум.}}
\put(40, 0){\line(0,1){15}\makebox(15,5){Подп.}}
\put(55, 0){\line(0,1){15}\makebox(10,5){Дата}}
\put(65, 0){\line(0,1){15}\makebox(110,15){\large\rightmark \decim\ \docType}}
\put(175,10){\makebox(10,5){Лист}}
\put(175, 0){\line(0,1){15}\makebox(10,10){\normalsize\thepage}}
\put(175,10){\line(1,0){10}}
\end{picture}
}
}}
